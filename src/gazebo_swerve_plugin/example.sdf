<sdf version="1.6">
  <world name="default">
    <physics type="ode">
      <max_step_size>0.001</max_step_size>
      <real_time_update_rate>1000</real_time_update_rate>
    </physics>

    <model name="swerve_robot">
      <!-- Robot Link: Base link -->
      <link name="base_link">
        <pose>0 0 0.5 0 0 0</pose>
        <collision name="collision">
          <geometry>
            <box>
              <size>0.5 0.5 0.1</size>
            </box>
          </geometry>
        </collision>
        <visual name="visual">
          <geometry>
            <box>
              <size>0.5 0.5 0.1</size>
            </box>
          </geometry>
          <material>
            <ambient>0.7 0.7 0.7 1</ambient>
            <diffuse>0.7 0.7 0.7 1</diffuse>
          </material>
        </visual>
      </link>

      <!-- Pivot joints (for steering) -->
      <joint name="pivot_joint1" type="revolute">
        <parent>base_link</parent>
        <child>pivot_link1</child>
        <pose>0.25 0.25 0.1 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
        </axis>
      </joint>

      <joint name="pivot_joint2" type="revolute">
        <parent>base_link</parent>
        <child>pivot_link2</child>
        <pose>0.25 -0.25 0.1 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
        </axis>
      </joint>

      <joint name="pivot_joint3" type="revolute">
        <parent>base_link</parent>
        <child>pivot_link3</child>
        <pose>-0.25 0.25 0.1 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
        </axis>
      </joint>

      <joint name="pivot_joint4" type="revolute">
        <parent>base_link</parent>
        <child>pivot_link4</child>
        <pose>-0.25 -0.25 0.1 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
        </axis>
      </joint>

      <!-- Drive joints (for motors) -->
      <joint name="drive_joint1" type="revolute">
        <parent>pivot_link1</parent>
        <child>drive_link1</child>
        <pose>0 0 0.1 0 0 0</pose>
        <axis>
          <xyz>0 1 0</xyz>
        </axis>
      </joint>

      <joint name="drive_joint2" type="revolute">
        <parent>pivot_link2</parent>
        <child>drive_link2</child>
        <pose>0 0 0.1 0 0 0</pose>
        <axis>
          <xyz>0 1 0</xyz>
        </axis>
      </joint>

      <joint name="drive_joint3" type="revolute">
        <parent>pivot_link3</parent>
        <child>drive_link3</child>
        <pose>0 0 0.1 0 0 0</pose>
        <axis>
          <xyz>0 1 0</xyz>
        </axis>
      </joint>

      <joint name="drive_joint4" type="revolute">
        <parent>pivot_link4</parent>
        <child>drive_link4</child>
        <pose>0 0 0.1 0 0 0</pose>
        <axis>
          <xyz>0 1 0</xyz>
        </axis>
      </joint>

      <!-- Links for the pivots -->
      <link name="pivot_link1">
        <pose>0 0 0 0 0 0</pose>
        <collision name="pivot_collision1">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <link name="pivot_link2">
        <pose>0 0 0 0 0 0</pose>
        <collision name="pivot_collision2">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <link name="pivot_link3">
        <pose>0 0 0 0 0 0</pose>
        <collision name="pivot_collision3">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <link name="pivot_link4">
        <pose>0 0 0 0 0 0</pose>
        <collision name="pivot_collision4">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <!-- Links for the drives -->
      <link name="drive_link1">
        <pose>0 0 0 0 0 0</pose>
        <collision name="drive_collision1">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <link name="drive_link2">
        <pose>0 0 0 0 0 0</pose>
        <collision name="drive_collision2">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <link name="drive_link3">
        <pose>0 0 0 0 0 0</pose>
        <collision name="drive_collision3">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <link name="drive_link4">
        <pose>0 0 0 0 0 0</pose>
        <collision name="drive_collision4">
          <geometry>
            <cylinder>
              <radius>0.05</radius>
              <length>0.1</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <!-- Plugin section -->
      <plugin filename="libSwerveDrivePlugin.so" name="swerve_drive::SwerveDrivePlugin">
        <pivotJoints>pivot_joint1 pivot_joint2 pivot_joint3 pivot_joint4</pivotJoints>
        <driveJoints>drive_joint1 drive_joint2 drive_joint3 drive_joint4</driveJoints>
      </plugin>

    </model>
  </world>
</sdf>
